/* ========================================
   TRD Services Spotlight Component
   Adapted from CGMWTAUGUST2025 Spotlight pattern
   ======================================== */

.services-spotlight {
  position: relative;
  width: 100vw;
  height: 100svh;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  background-color: var(--concrete-900);

  /* No explicit z-index - let ScrollTrigger manage stacking during pin */
}

/* TRD-branded double border outline - COMPLETELY REMOVED */
.spotlight-outline {
  display: none; /* Hide completely - no borders */
}

.spotlight-outline::after {
  display: none; /* Hide completely - no borders */
}

/* Inner container with rounded corners */
.spotlight-inner {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  border-radius: 0;
  background-color: var(--concrete-800);
  z-index: 101;
}

/* ==================== INTRO TEXT (0-20% progress) ==================== */
.spotlight-intro-text-wrapper {
  position: absolute;
  width: 100%;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  gap: 0.5rem;
  z-index: 103;
}

.spotlight-intro-text {
  flex: 1;
  position: relative;
  will-change: transform;
  color: var(--concrete-200);
  opacity: 0;
}

.spotlight-intro-text p {
  font-size: clamp(2rem, 5vw, 3.5rem);
  font-weight: 600;
  letter-spacing: -0.02em;
  line-height: 1;
}

.spotlight-intro-text:nth-child(1) {
  display: flex;
  justify-content: flex-end;
  padding-right: 0.5rem;
}

.spotlight-intro-text:nth-child(2) {
  padding-left: 0.5rem;
}

/* ==================== BACKGROUND IMAGE (0-25% progress) ==================== */
.spotlight-bg-img {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
  transform: scale(0);
  will-change: transform;
  border-radius: 2rem;
  opacity: 0.5;
  z-index: 101;
}

.spotlight-bg-img img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transform: scale(1.5);
  will-change: transform;
  filter: grayscale(0.3) brightness(0.7);
}

/* ==================== SCROLLING TITLES (25-95% progress) ==================== */
.spotlight-titles-container {
  position: absolute;
  top: 0;
  left: 15vw;
  width: 100%;
  height: 100%;
  overflow: hidden;
  /* Angular clip-path mask creates the spotlight reveal area */
  clip-path: polygon(
    50svh 0px,
    0px 50%,
    50svh 100%,
    100% calc(100% + 100svh),
    100% -100svh
  );
  --before-opacity: 0;
  --after-opacity: 0;
  z-index: 103;
}

/* Decorative diagonal lines */
.spotlight-titles-container::before,
.spotlight-titles-container::after {
  content: "";
  position: absolute;
  width: 100svh;
  height: 2px;
  background: var(--concrete-100);
  pointer-events: none;
  transition: opacity 0.3s ease;
  z-index: 104;
}

.spotlight-titles-container::before {
  top: 0;
  left: 0;
  transform: rotate(-45deg) translate(-7rem);
  opacity: var(--before-opacity);
}

.spotlight-titles-container::after {
  bottom: 0;
  left: 0;
  transform: rotate(45deg) translate(-7rem);
  opacity: var(--after-opacity);
}

.spotlight-titles {
  position: relative;
  left: 15%;
  width: 75%;
  height: 100%;
  display: flex;
  flex-direction: column;
  gap: 5rem;
  transform: translateY(100%);
  z-index: 103;
  will-change: transform;
}

.spotlight-titles h1 {
  color: var(--concrete-100);
  opacity: 0.35;
  transition: opacity 0.3s ease;
  font-size: clamp(2.5rem, 5vw, 4rem);
  font-weight: 500;
  line-height: 1.1;
  letter-spacing: -0.02em;
}

/* ==================== IMAGES (Bezier curve motion) ==================== */
.spotlight-images {
  position: absolute;
  top: 0;
  right: 0;
  width: 50%;
  min-width: 300px;
  height: 100%;
  z-index: 102;
  pointer-events: none;
}

.spotlight-img {
  position: absolute;
  width: 200px;
  height: 150px;
  will-change: transform, opacity;
  border-radius: 1rem;
  overflow: hidden;
  border: 2px solid var(--industrial-500);
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
}

.spotlight-img img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* ==================== HEADER TEXT ==================== */
.spotlight-header {
  position: absolute;
  top: 50%;
  left: 10%;
  transform: translateY(-50%);
  color: var(--concrete-100);
  transition: opacity 0.3s ease;
  z-index: 103;
  opacity: 0;
}

.spotlight-header p {
  font-size: clamp(1rem, 2vw, 1.25rem);
  font-weight: 600;
  line-height: 1;
  color: var(--concrete-100);
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

/* ==================== RESPONSIVE DESIGN ==================== */
@media (max-width: 1000px) {
  /* Simplified mobile layout - text only, no floating images */

  /* Show background image statically on mobile */
  .spotlight-bg-img {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0.3;
    z-index: 100;
    transform: scale(1) !important;
    pointer-events: none;
  }

  .spotlight-bg-img img {
    transform: scale(1) !important;
    filter: grayscale(0.5) brightness(0.6);
  }

  /* Hide floating images on mobile - too cluttered */
  .spotlight-images {
    display: none !important;
  }

  .spotlight-img {
    display: none !important;
  }

  /* Adjust intro text size */
  .spotlight-intro-text p {
    font-size: clamp(1.25rem, 4vw, 2rem);
  }

  /* Keep header in original centered position */
  .spotlight-header {
    top: 50%;
    left: 10%;
    transform: translateY(-50%);
  }

  .spotlight-header h2 {
    font-size: clamp(2rem, 6vw, 3rem);
  }

  /* Titles container - MUST stay within this container for clipping */
  .spotlight-titles-container {
    left: 15vw;
    width: 70vw;
    overflow: hidden; /* Critical: ensures clipping works */
    clip-path: polygon(
      20svh 0px,
      0px 50%,
      20svh 100%,
      100% calc(100% + 40svh),
      100% -40svh
    );
  }

  /* Position titles INSIDE the clipped container - pushed right */
  .spotlight-titles {
    position: absolute;
    left: 45%; /* Push titles 15% more to the right */
    top: 0;
    width: 63%; /* Shrink width by 40% total (30% + 10%) */
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding-left: 1rem;
  }

  .spotlight-titles h1 {
    font-size: clamp(1.75rem, 5vw, 2.5rem);
    line-height: 1.3;
    margin: 1.5rem 0;
  }

  /* Keep white diagonal lines visible */
  .spotlight-titles-container::before,
  .spotlight-titles-container::after {
    opacity: 1;
  }
}

@media (max-width: 640px) {
  /* Small mobile - text only, tighter layout */

  /* Keep images hidden */
  .spotlight-images {
    display: none !important;
  }

  .spotlight-img {
    display: none !important;
  }

  /* Adjust intro text for small screens */
  .spotlight-intro-text p {
    font-size: clamp(1rem, 4vw, 1.5rem);
  }

  .spotlight-intro-text:nth-child(1) {
    padding-right: 0.25rem;
  }

  .spotlight-intro-text:nth-child(2) {
    padding-left: 0.25rem;
  }

  /* Header positioning for small screens - keep centered */
  .spotlight-header {
    top: 50%;
    left: 8%;
    transform: translateY(-50%);
  }

  .spotlight-header h2 {
    font-size: clamp(1.75rem, 6vw, 2.25rem);
  }

  /* Tighter clip path and container for small screens */
  .spotlight-titles-container {
    left: 12vw;
    width: 75vw;
    clip-path: polygon(
      15svh 0px,
      0px 50%,
      15svh 100%,
      100% calc(100% + 30svh),
      100% -30svh
    );
  }

  /* Smaller text for small screens - pushed right */
  .spotlight-titles {
    left: 40%; /* Push 15% more to the right on small screens */
    width: 67.5%; /* Shrink by additional 10% */
    padding-left: 1rem;
  }

  .spotlight-titles h1 {
    font-size: clamp(1.25rem, 5vw, 1.75rem);
    line-height: 1.4;
    margin: 1rem 0;
  }
}

/* ==================== ACCESSIBILITY ==================== */
@media (prefers-reduced-motion: reduce) {
  /* Disable will-change for better performance */
  .spotlight-intro-text,
  .spotlight-bg-img,
  .spotlight-bg-img img,
  .spotlight-titles,
  .spotlight-img {
    will-change: auto;
  }

  /* Simplify transitions */
  .spotlight-titles h1,
  .spotlight-header,
  .spotlight-titles-container::before,
  .spotlight-titles-container::after {
    transition: none;
  }
}

/* ==================== DARK MODE ADJUSTMENTS ==================== */
@media (prefers-color-scheme: dark) {
  .services-spotlight {
    background-color: var(--concrete-950, #050505);
  }

  .spotlight-inner {
    background-color: var(--concrete-900, #0a0c0d);
  }

  .spotlight-bg-img img {
    filter: grayscale(0.4) brightness(0.6);
  }
}
